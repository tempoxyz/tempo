# `Handler.feePayer`

Creates a server handler that acts as a fee payer for transactions. 
This enables you to subsidize gas costs for your users by signing transactions with a dedicated fee payer account on your backend.

## Usage

:::code-group

```ts twoslash [server.ts]
// @noErrors
import { Handler } from 'tempo.ts/server'
import { tempo } from 'tempo.ts/chains'
import { http } from 'viem'
import { privateKeyToAccount } from 'viem/accounts'

const handler = Handler.feePayer({
  account: privateKeyToAccount('0x...'),
  chain: tempo({ feeToken: '0x20c0...0001' }),
  path: '/fee-payer',
  transport: http(),
})
```

```ts twoslash [example.client.ts]
// @noErrors
import { createClient, http, walletActions } from 'viem'
import { tempo } from 'tempo.ts/chains'
import { tempoActions, withFeePayer } from 'tempo.ts/viem'

const client = createClient({
  chain: tempo({ feeToken: '0x20c0...0001' }),
  transport: withFeePayer(
    http(), // Default transport
    http('http://localhost:3000/fee-payer'), // Fee payer transport (your server)
  ),
}).extend(tempoActions())

// Send a fee-sponsored payment
const receipt = await client.token.transferSync({
  amount: parseUnits('10', 6),
  feePayer: true,
  to: '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEbb',
  token: '0x20c0000000000000000000000000000000000001',
})
```

:::

Then plug `handler` into your server framework of choice. For example:

```ts
createServer(handler.listener) // Node.js
Bun.serve(handler) // Bun
Deno.serve(handler) // Deno
app.all('*', c => handler.fetch(c.request)) // Elysia
app.use(handler.listener) // Express
app.use(c => handler.fetch(c.req.raw)) // Hono
export const GET = handler.fetch // Next.js
export const POST = handler.fetch // Next.js
```


## How It Works

The fee payer handler intercepts RPC requests and handles the following methods:

- **`eth_signTransaction`** - Signs a transaction with the fee payer account
- **`eth_signRawTransaction`** - Signs a pre-serialized transaction with the fee payer account
- **`eth_sendRawTransaction`** - Signs and broadcasts a transaction with the fee payer account
- **`eth_sendRawTransactionSync`** - Signs, broadcasts, and waits for confirmation

For each of these methods, the handler:
1. Deserializes the transaction (if necessary)
2. Signs the transaction with your fee payer account
3. Returns the signed transaction or transaction hash

## Parameters

### account

- **Type:** `LocalAccount`
- **Required:** Yes

The account to use as the fee payer. This account will sign all transactions and pay the gas fees.

### chain

- **Type:** `Chain`

Chain (and fee token) to use.

### transport

- **Type:** `Transport`

Transport to use.

### path

- **Type:** `string`
- **Default:** `'/'`
- **Optional**

The path where the handler will listen for requests.

### onRequest

- **Type:** `(request: RpcRequest) => Promise<void>`
- **Optional**

A callback function that's called before processing each request. Useful for logging, rate limiting, or custom validation.

