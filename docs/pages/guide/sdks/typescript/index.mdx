import * as Card from "../../../../components/Card.tsx"

# Getting Started

Tempo distributes a TypeScript SDK for:
- [Viem](https://viem.sh): TypeScript interface for EVM blockchains
- [Wagmi](https://wagmi.sh): React Hooks (and reactive primitives) for EVM blockchains

The Tempo extensions can be used to perform common operations with the chain, such as: 
 querying the chain, sending Tempo transactions, managing tokens & their AMM pools, and more.

<Card.Container>
  <Card.Link
    description="Set up a Viem client to interact with Tempo"
    href="#viem-setup"
    icon={() => (
      <>
        <img className="size-4.5 dark:hidden" src="https://viem.sh/icon-light.png" alt="Viem" />
        <img className="size-4.5 not-dark:hidden" src="https://viem.sh/icon-dark.png" alt="Viem" />
      </>
    )}
    title="Viem Setup"
  />
  <Card.Link
    description="Set up a Wagmi configuration with Tempo"
    href="#wagmi-setup"
    icon={() => 
      <img className="size-4.5 not-dark:invert" src="https://wagmi.sh/favicon.svg" alt="Wagmi" />
    }
    title="Wagmi Setup"
  />
</Card.Container>

:::tip

**When should I use Wagmi vs. Viem?**

- **Viem** is best suited for **libraries, tooling, servers, scripting, etc** – a low-level and stateless interface for the EVM
- **Wagmi** is best suited for **applications & wallets** – a high-level and stateful interface for the EVM (React Hooks, Vanilla JS, etc)

:::

## Viem Setup

::::steps

### Install

To install the Tempo extension, you will need to install [Viem](https://viem.sh) and Tempo:

:::code-group

```bash [npm]
npm i tempo.ts viem
```

```bash [pnpm]
pnpm i tempo.ts viem
```

:::

### Configure

Next, we will configure a [Viem Client](https://viem.sh/get-started/clients/custom).

```ts twoslash [viem.config.ts]
// [!include ~/snippets/viem.config.ts:setup]
```

### Use Viem Actions

Once we have configured our Viem client with Tempo, we can then use regular Viem actions (e.g. `sendTransactionSync`) 
that are decorated with [Tempo Transaction](/documentation/protocol/transactions/spec-tempo-transaction) properties
like `calls`, `feePayer`, `nonceKey` and more!

:::code-group

```ts twoslash [example.ts]
import { client } from './viem.config'

const receipt = await client.sendTransactionSync({
  calls: [
    {
      data: '0xcafebabe00000000000000000000000000000001',
      to: '0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef'
    },
    {
      data: '0xdeadbeef00000000000000000000000000000002',
      to: '0xfeedfacefeedfacefeedfacefeedfacefeedface'
    },
    {
      data: '0xfeedface00000000000000000000000000000003',
      to: '0xfeedfacefeedfacefeedfacefeedfacefeedface'
    },
  ],
  feePayer: '0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045',
  nonceKey: 1337n,
})
```

```ts twoslash [viem.config.ts] filename="viem.config.ts"
// [!include ~/snippets/viem.config.ts:setup]
```

:::

:::tip

[See all Viem Actions](https://viem.sh/docs/actions/public/introduction)

:::

### Use Tempo Actions

You can also use [Tempo-specific Actions](/sdk/typescript/viem/actions):

:::code-group

```ts twoslash [example.ts]
import { client } from './viem.config'

const alphaUsd = '0x20c0000000000000000000000000000000000001'

const metadata = await client.token.getMetadata({ 
  token: alphaUsd 
})

console.log(
  'Alpha USD Metadata:', 
  metadata.name,
  metadata.symbol,
  metadata.decimals,
  metadata.totalSupply
)
// @log: Alpha USD Metadata: Alpha USD, AlphaUSD, 6, 1000000000000000000000n
```

```ts twoslash [viem.config.ts] filename="viem.config.ts"
// [!include ~/snippets/viem.config.ts:setup]
```

:::

:::tip

[See all Tempo Actions](/sdk/typescript/viem/actions)

:::

### Next Steps

After you have set up Tempo with Viem, you can now:

- Follow a guide on how to [use accounts](/guide/use-accounts), [make payments](/guide/payments), [issue stablecoins](/guide/issuance), [exchange stablecoins](/guide/stablecoin-exchange), and [more](/guide).
- Use the [suite of Tempo Actions](/sdk/typescript/viem/actions)

::::

## Wagmi Setup

::::steps

### Install

To add Wagmi to your project, install the required packages:

:::code-group

```bash [npm]
npm i tempo.ts wagmi viem @tanstack/react-query
```

```bash [pnpm]
pnpm i tempo.ts wagmi viem @tanstack/react-query
```

:::

- [Viem](https://viem.sh) is a TypeScript interface for the EVM that performs blockchain operations.
- [TanStack Query](https://tanstack.com/query/v5) is an async state manager that handles requests, caching, and more.

### Create Config

Create and export a new Wagmi config using `createConfig`.

```tsx twoslash
// @noErrors
// [!include ~/snippets/wagmi.config.ts:setup]
```

In this example, Wagmi is configured to use the Tempo chain and `webAuthn` connector to enable Passkeys. Check out the [`createConfig` docs](https://wagmi.sh/react/api/createConfig) for more configuration options.

:::tip

It is highly recommended to set a `feeToken` on the `tempo` chain, which will be used as the
default fee token for all transactions. If you do not wish to use a default fee token, you can set
it to `null` to opt in to Tempo's [default fee token preferences](/documentation/protocol/fees/spec-fee#fee-token-preferences).

:::

### Wrap App in Context Provider

Wrap your app in the `WagmiProvider` React Context Provider and pass the `config` you created earlier to the `config` property.

:::code-group

```tsx [app.tsx]
import { WagmiProvider } from 'wagmi' // [!code focus]
import { config } from './config' // [!code focus]

function App() {
  return (
    <WagmiProvider config={config}> {/* [!code focus] */}
      {/** ... */}
    </WagmiProvider> // [!code focus] 
  )
}
```

```tsx [config.ts]
// [!include ~/snippets/wagmi.config.ts:setup]
```

:::

Check out the [`WagmiProvider` docs](https://wagmi.sh/react/api/WagmiProvider) to learn more about React Context in Wagmi.

### Setup TanStack Query

Inside the `WagmiProvider`, wrap your app in a TanStack Query React Context Provider, e.g. `QueryClientProvider`, and pass a new `QueryClient` instance to the `client` property.

:::code-group

```tsx [app.tsx]
import { QueryClient, QueryClientProvider } from '@tanstack/react-query' // [!code focus]
import { WagmiProvider } from 'wagmi'
import { config } from './config'

const queryClient = new QueryClient() // [!code focus]

function App() {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}> {/* [!code focus] */}
        {/** ... */} 
      </QueryClientProvider> {/* [!code focus] */}
    </WagmiProvider>
  )
}
```

```tsx [config.ts]
// [!include ~/snippets/wagmi.config.ts:setup]
```

:::

Check out the [TanStack Query docs](https://tanstack.com/query/latest/docs/framework/react/overview) to learn about the library, APIs, and more.

### Use Wagmi Hooks

Now that everything is set up, we can now use regular Wagmi Hooks (e.g. `useSendTransactionSync`) 
that are decorated with [Tempo properties](/documentation/protocol/transactions/spec-tempo-transaction) 
like `calls` (batch transactions), `feePayer` (fee sponsorship), `nonceKey` (concurrent transactions) and more!

:::code-group

```tsx [balance.tsx]
import { useAccount, useSendTransactionSync } from 'wagmi'

export function TokenMetadata() {
  const { sendTransactionSync } = useSendTransactionSync()

  return (
    <button
      onClick={() =>
        sendTransactionSync({
          calls: [
            {
              data: '0xcafebabe00000000000000000000000000000001',
              to: '0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef'
            },
            {
              data: '0xdeadbeef00000000000000000000000000000002',
              to: '0xfeedfacefeedfacefeedfacefeedfacefeedface'
            },
            {
              data: '0xfeedface00000000000000000000000000000003',
              to: '0xfeedfacefeedfacefeedfacefeedfacefeedface'
            },
          ],
          feePayer: '0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045',
          nonceKey: 1337n,
        })
      }
    >
      Send transaction
    </button>
  )
}
```

```tsx [app.tsx]
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { WagmiProvider } from 'wagmi'
import { config } from './config'
import { Profile } from './profile'

const queryClient = new QueryClient()

function App() {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}>
        <Profile />
      </QueryClientProvider>
    </WagmiProvider>
  )
}
```

```tsx [config.ts]
// [!include ~/snippets/wagmi.config.ts:setup]
```

:::

### Use Tempo Hooks

You can also use [Tempo-specific Hooks](/sdk/typescript/wagmi/hooks):

:::code-group

```tsx [balance.tsx]
import { useAccount } from 'wagmi'
import { Hooks } from 'tempo.ts/wagmi'

const alphaUsd = '0x20c0000000000000000000000000000000000001'

export function TokenMetadata() {
  const { data: metadata, ...metadataQuery } = Hooks.token.useGetMetadata({ 
    token: alphaUsd 
  })

  if (metadataQuery.isError)
    return <div>Error fetching metadata: {metadataQuery.error.message}</div>
  if (metadataQuery.isLoading) return <div>Loading metadata...</div>
  return <div>{metadata.name} ({metadata.symbol})</div>
}
```

```tsx [app.tsx]
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { WagmiProvider } from 'wagmi'
import { config } from './config'
import { Profile } from './profile'

const queryClient = new QueryClient()

function App() {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}>
        <Profile />
      </QueryClientProvider>
    </WagmiProvider>
  )
}
```

```tsx [config.ts]
// [!include ~/snippets/wagmi.config.ts:setup]
```

:::

### Next Steps

After you have set up your Tempo with Wagmi, you can now:

- Follow a guide on how to [use accounts](/guide/use-accounts), [make payments](/guide/payments), [issue stablecoins](/guide/issuance), [exchange stablecoins](/guide/stablecoin-exchange), and [more](/guide).
- Use the [suite of Tempo Hooks](/sdk/typescript/wagmi/hooks)

::::

